{"version":3,"sources":["ProgressBar.es6"],"names":[],"mappings":"AAAA;;;;;;AAEA,IAAM,cAAe,YAAY;AAC7B,QAAI;AACA,6BAAY,IAAZ,EAAkB,GAAlB,EAAgE;AAAA,gBAAzC,cAAyC,uEAAxB,IAAwB;AAAA,gBAAlB,SAAkB,uEAAN,IAAM;;AAAA;;AAC5D,gBAAI,SAAJ,EAAe;AACX,qBAAK,IAAL,GAAY,YAAY,QAAZ,CAAqB,KAArB,EAAZ;AACH,aAFD,MAEO;AACH,qBAAK,IAAL,GAAY,YAAY,QAAZ,CAAqB,IAArB,CAA0B,WAA1B,EAAuC,KAAvC,EAAZ;AACH;AACD,gBAAI,SAAS,IAAT,IAAiB,SAArB,EACI,KAAK,IAAL,CAAU,IAAV,CAAe,QAAf,EAAyB,IAAzB,CAA8B,IAA9B,EADJ,KAGI,KAAK,IAAL,CAAU,IAAV,CAAe,QAAf,EAAyB,IAAzB;AACJ,iBAAK,KAAL,GAAa,IAAb;AACA,gBAAI,mBAAmB,IAAvB,EACI,KAAK,cAAL,GAAsB,cAAtB,CADJ,KAGI,KAAK,cAAL,GAAsB,UAAC,CAAD,EAAI,GAAJ;AAAA,uBAAY,CAAZ;AAAA,aAAtB;AACJ,iBAAK,SAAL,GAAiB,KAAjB;AACA,iBAAK,QAAL,CAAc,CAAd;AACA,iBAAK,MAAL,CAAY,GAAZ;AACH;;AAnBD;AAAA;AAAA,mCAqBO,GArBP,EAqBY;AACR,qBAAK,IAAL,GAAY,GAAZ;AACA,qBAAK,IAAL,CAAU,IAAV,CAAe,eAAf,EAAgC,IAAhC,CAAqC,eAArC,EAAsD,GAAtD;AACA,qBAAK,QAAL,CAAc,KAAK,IAAnB;AACH;AAzBD;AAAA;AAAA,qCA2BS,GA3BT,EA2B8B;AAAA,oBAAhB,OAAgB,uEAAN,IAAM;;AAC1B,qBAAK,IAAL,GAAY,GAAZ;AACA,qBAAK,IAAL,CAAU,IAAV,CAAe,eAAf,EAAgC,IAAhC,CAAqC,eAArC,EAAsD,GAAtD,EAA2D,GAA3D,CAA+D,OAA/D,EAAwE,MAAM,KAAK,IAAX,GAAkB,GAAlB,GAAwB,GAAhG,EACK,IADL,CACU,WADV,EACuB,IADvB,CAC4B,KAAK,cAAL,CAAoB,GAApB,EAAyB,KAAK,IAA9B,CAD5B;AAEA,oBAAI,OAAJ,EAAa;AACT,yBAAK,UAAL;AACH;AACJ;AAlCD;AAAA;AAAA,yCAoCa;AAAA;;AACT,oBAAI,CAAC,KAAK,SAAV,EAAqB;AACjB,yBAAK,KAAL,GAAa,YAAY,YAAM;AAC3B,4BAAI,IAAI,MAAK,IAAL,GAAY,YAAY,KAAhC;AACA,4BAAI,KAAK,MAAK,IAAd,EACI,MAAK,QAAL,CAAc,CAAd,EADJ,KAGI,MAAK,SAAL;AACP,qBANY,EAMV,YAAY,KANF,CAAb;AAOA,yBAAK,SAAL,GAAiB,IAAjB;AACH;AACD,uBAAO,KAAK,KAAZ;AACH;AAhDD;AAAA;AAAA,wCAkDY;AACR,qBAAK,SAAL,GAAiB,KAAjB;AACA,8BAAc,KAAK,KAAnB;AACH;AArDD;;AAAA;AAAA,OAAJ;;AAwDA,QAAI,6lBAAJ;AAaA,gBAAY,QAAZ,GAAuB,EAAE,OAAF,CAAvB;AACA,gBAAY,KAAZ,GAAoB,GAApB;AACA,WAAO,WAAP;AACH,CAzEmB,EAApB","file":"ProgressBar.js","sourcesContent":["\"use strict\";\r\n\r\nconst ProgressBar = (function () {\r\n    let ProgressBar = class {\r\n        constructor(name, max, formatFunction = null, withPanel = true) {\r\n            if (withPanel) {\r\n                this.body = ProgressBar._pattern.clone();\r\n            } else {\r\n                this.body = ProgressBar._pattern.find('.progress').clone();\r\n            }\r\n            if (name !== null && withPanel)\r\n                this.body.find(\"._name\").text(name);\r\n            else\r\n                this.body.find(\"._name\").hide();\r\n            this.timer = null;\r\n            if (formatFunction !== null)\r\n                this.formatFunction = formatFunction;\r\n            else\r\n                this.formatFunction = (v, max) => v;\r\n            this.isRunning = false;\r\n            this.setValue(0);\r\n            this.setMax(max);\r\n        }\r\n\r\n        setMax(val) {\r\n            this._max = val;\r\n            this.body.find(\".progress-bar\").attr(\"aria-valuemax\", val);\r\n            this.setValue(this._val)\r\n        }\r\n\r\n        setValue(val, autoRun = true) {\r\n            this._val = val;\r\n            this.body.find(\".progress-bar\").attr(\"aria-valuenow\", val).css(\"width\", val / this._max * 100 + \"%\")\r\n                .find(\"._current\").text(this.formatFunction(val, this._max));\r\n            if (autoRun) {\r\n                this.startTimer();\r\n            }\r\n        }\r\n\r\n        startTimer() {\r\n            if (!this.isRunning) {\r\n                this.timer = setInterval(() => {\r\n                    let v = this._val + ProgressBar.delta;\r\n                    if (v <= this._max)\r\n                        this.setValue(v);\r\n                    else\r\n                        this.stopTimer()\r\n                }, ProgressBar.delta);\r\n                this.isRunning = true;\r\n            }\r\n            return this.timer;\r\n        }\r\n\r\n        stopTimer() {\r\n            this.isRunning = false;\r\n            clearInterval(this.timer);\r\n        }\r\n    };\r\n\r\n    let pattern = `\r\n        <div class=\"progress-container panel panel-default\">\r\n            <div class=\"panel-body\">\r\n                <h5 class=\"_name\"></h5>\r\n                <div class=\"progress\">\r\n                    <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\"\r\n                         aria-valuemax=\"0\" style=\"min-width: 2em; width: 0; transition: width .2s ease\">\r\n                        <span class=\"_current\">0</span><span class=\"_suffix\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n    ProgressBar._pattern = $(pattern);\r\n    ProgressBar.delta = 200;\r\n    return ProgressBar;\r\n})();\r\n"]}