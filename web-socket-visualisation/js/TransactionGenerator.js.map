{"version":3,"sources":["TransactionGenerator.es6"],"names":[],"mappings":"AAAA;;;;;;;;AAEA,IAAM,uBAAwB,YAAY;AACtC;AACI,wCAAc;AAAA;;AACV,iBAAK,aAAL,GAAqB,CAArB;AACA,iBAAK,gBAAL,GAAwB,CAAxB;AACA,iBAAK,YAAL,GAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB;AACA,iBAAK,WAAL,GAAmB,IAAnB;AACA,iBAAK,SAAL,GAAiB,IAAjB;AACA,iBAAK,KAAL,GAAa,IAAb;AACH;;AARL;AAAA;AAAA,oCAUY,WAVZ,EAUyB,SAVzB,EAUoC;AAAA;;AAC5B,qBAAK,WAAL,GAAmB,WAAnB;AACA,qBAAK,SAAL,GAAiB,SAAjB;;AAEA,qBAAK,WAAL,CAAiB,IAAjB,CAAsB,OAAtB,EAA+B,GAA/B,CAAmC,aAAa,OAAb,CAAqB,yBAArB,CAAnC,EAAoF,EAApF,CAAuF,OAAvF,EAAgG,UAAC,CAAD,EAAO;AACnG,0BAAK,aAAL,GAAqB,OAAO,EAAE,EAAE,MAAJ,EAAY,GAAZ,EAAP,CAArB;AACA,iCAAa,OAAb,CAAqB,yBAArB,EAAgD,MAAK,aAArD;AACA,0BAAK,MAAL;AACH,iBAJD;AAKA,qBAAK,WAAL,CAAiB,IAAjB,CAAsB,OAAtB,EAA+B,GAA/B,CAAmC,aAAa,OAAb,CAAqB,4BAArB,CAAnC,EAAuF,EAAvF,CAA0F,OAA1F,EAAmG,UAAC,CAAD,EAAO;AACtG,0BAAK,gBAAL,GAAwB,OAAO,EAAE,EAAE,MAAJ,EAAY,GAAZ,EAAP,CAAxB;AACA,iCAAa,OAAb,CAAqB,4BAArB,EAAmD,MAAK,gBAAxD;AACA,0BAAK,MAAL;AACH,iBAJD;AAKA,qBAAK,WAAL,CAAiB,IAAjB,CAAsB,QAAtB,EAAgC,GAAhC,CAAoC,aAAa,OAAb,CAAqB,yBAArB,CAApC,EAAqF,EAArF,CAAwF,OAAxF,EAAiG,UAAC,CAAD,EAAO;AACpG,0BAAK,YAAL,CAAkB,CAAlB,IAAuB,OAAO,EAAE,EAAE,MAAJ,EAAY,GAAZ,EAAP,CAAvB;AACA,iCAAa,OAAb,CAAqB,yBAArB,EAAgD,MAAK,YAAL,CAAkB,CAAlB,CAAhD;AACA,0BAAK,MAAL;AACH,iBAJD;AAKA,qBAAK,WAAL,CAAiB,IAAjB,CAAsB,QAAtB,EAAgC,GAAhC,CAAoC,aAAa,OAAb,CAAqB,yBAArB,CAApC,EAAqF,EAArF,CAAwF,OAAxF,EAAiG,UAAC,CAAD,EAAO;AACpG,0BAAK,YAAL,CAAkB,CAAlB,IAAuB,OAAO,EAAE,EAAE,MAAJ,EAAY,GAAZ,EAAP,CAAvB;AACA,iCAAa,OAAb,CAAqB,yBAArB,EAAgD,MAAK,YAAL,CAAkB,CAAlB,CAAhD;AACA,0BAAK,MAAL;AACH,iBAJD;AAKH;AAlCL;AAAA;AAAA,sCA0Dc;AACN,uBAAO;AACH,6BAAS,KAAK,aADX;AAEH,0DAAa,qBAAqB,eAArB,CAAqC,KAAK,gBAA1C,EAA4D,KAAK,YAAjE,CAAb;AAFG,iBAAP;AAIH;AA/DL;AAAA;AAAA,qCAyEa;AACL,qBAAK,KAAL,GAAa,IAAb;AACA,qBAAK,SAAL,CAAe,IAAf,CAAoB,KAAK,SAAL,CAAe,KAAK,IAApB,EAA0B,IAA1B,EAAgC,CAAhC,CAApB;AACH;AA5EL;AAAA;AAAA,gCAiEe;AACP,oBAAI,KAAK,KAAT,EAAgB;AACZ,2BAAO,KAAK,KAAZ;AACH,iBAFD,MAEO;AACH,2BAAO,KAAK,KAAL,GAAa,KAAK,OAAL,EAApB;AACH;AACJ;AAvEL;AAAA;AAAA,oEAoC4B,MApC5B,EAoCoC,YApCpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAqCiB,iCArCjB,GAqCqB,CArCrB;;AAAA;AAAA,sCAqCwB,IAAI,MArC5B;AAAA;AAAA;AAAA;;AAAA;AAAA,uCAsCkB,qBAAqB,SAArB,CAA+B,CAA/B,EAAkC,YAAlC,CAtClB;;AAAA;AAqCoC,mCArCpC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCA0CqB,CA1CrB,EA0CwB,YA1CxB,EA0CsC;AAC9B,oBAAI,UAAU,OAAO,QAAQ,KAAf,CAAd;AACA,uBAAO;AACH,uCAAiB,CAAjB,aAA0B,OADvB;AAEH,6BAAS;AACL;AACA,sDAA4B,CAA5B,SAFK;AAGL,iCAAS,4CAAW,YAAX;AAHJ,qBAFN;AAOH,yBAAK,MAAM,OAPR;AAQH,4BAAQ,KARL;AASH,0BAAM,EATH;AAUH,6BAAS;AAVN,iBAAP;AAYH;AAxDL;;AAAA;AAAA;AA8EH,CA/E4B,EAA7B","file":"TransactionGenerator.js","sourcesContent":["\"use strict\";\r\n\r\nconst TransactionGenerator = (function () {\r\n    return class TransactionGenerator {\r\n        constructor() {\r\n            this.globalTimeout = 0;\r\n            this.numberOfServices = 0;\r\n            this.localTimeout = [0, 0];\r\n            this.params_node = null;\r\n            this.json_node = null;\r\n            this._json = null;\r\n        }\r\n\r\n        connect(params_node, json_node) {\r\n            this.params_node = params_node;\r\n            this.json_node = json_node;\r\n\r\n            this.params_node.find(\"#i_gt\").val(localStorage.getItem(\"generator_globalTimeout\")).on(\"input\", (e) => {\r\n                this.globalTimeout = Number($(e.target).val());\r\n                localStorage.setItem(\"generator_globalTimeout\", this.globalTimeout);\r\n                this.render();\r\n            });\r\n            this.params_node.find(\"#i_ns\").val(localStorage.getItem(\"generator_numberOfServices\")).on(\"input\", (e) => {\r\n                this.numberOfServices = Number($(e.target).val());\r\n                localStorage.setItem(\"generator_numberOfServices\", this.numberOfServices);\r\n                this.render();\r\n            });\r\n            this.params_node.find(\"#i_lt0\").val(localStorage.getItem(\"generator_localTimeout0\")).on(\"input\", (e) => {\r\n                this.localTimeout[0] = Number($(e.target).val());\r\n                localStorage.setItem(\"generator_localTimeout0\", this.localTimeout[0]);\r\n                this.render();\r\n            });\r\n            this.params_node.find(\"#i_lt1\").val(localStorage.getItem(\"generator_localTimeout1\")).on(\"input\", (e) => {\r\n                this.localTimeout[1] = Number($(e.target).val());\r\n                localStorage.setItem(\"generator_localTimeout1\", this.localTimeout[1]);\r\n                this.render();\r\n            });\r\n        }\r\n\r\n        static *actionGenerator(number, localTimeout) {\r\n            for (let i = 0; i < number; i++) {\r\n                yield TransactionGenerator.getAction(i, localTimeout)\r\n            }\r\n        }\r\n\r\n        static getAction(i, localTimeout) {\r\n            let rndWord = choice(globals.words);\r\n            return {\r\n                _id: `Service #${i} GET ${rndWord}`,\r\n                service: {\r\n                    //name: `Service #${i}`,\r\n                    url: `http://localhost:501${i}/api`,\r\n                    timeout: randInt(...localTimeout),\r\n                },\r\n                url: \"/\" + rndWord,\r\n                method: \"GET\",\r\n                data: {},\r\n                headers: {}\r\n            }\r\n        }\r\n\r\n        _toJSON() {\r\n            return {\r\n                timeout: this.globalTimeout,\r\n                actions: [...TransactionGenerator.actionGenerator(this.numberOfServices, this.localTimeout)]\r\n            };\r\n        }\r\n\r\n        get json() {\r\n            if (this._json) {\r\n                return this._json\r\n            } else {\r\n                return this._json = this._toJSON()\r\n            }\r\n        }\r\n\r\n        render() {\r\n            this._json = null;\r\n            this.json_node.text(JSON.stringify(this.json, null, 4));\r\n        }\r\n    };\r\n})();\r\n"]}